#  论文复现：Predicting the Demographics of Twitter Users from Website Traffic Data

### 摘要

社交网络的人口统计学数据挖掘正逐渐成为一个热门领域。不同于以往的基于文本，并需要人工注解的的监督式学习的分类方法，在本文中，我们将仅仅基于Twitter用户之间的关注网络关系，针对1500个网站利用公开的访问流量数据作为验证数据集，我们构造出一个回归模型，用来推断他们人口统计学数据。

## 1. 前言

### 1.1 研究背景与动机 

如今，互联网——尤其是社交网络已经成为人们生活中不可或缺的一环，而当今正在有越来越多的研究者把目光投向了通过挖掘社交网络中的数据，并加以建模来对真实世界的属性进行推断的工作之中，我们称之为“虚实映射”。而计算机科学的发达使得研究工作者能够大规模地通过挖掘社交网络中的数据，利用机器学习等方法来对使用它的人群们进行诸如政治、经济、文化等方面的人口统计学方面的推断，如果这种推断具有较高的准确性以至于达到了一定的标准，我们就可以将这样的大数据作为真实世界中各领域研究工作的有效数据源，从而进行更多更加深入的研究。

### 1.2 相关工作与其不足

目前，相关研究普遍采用监督式学习的方法：用一个人工确认过的可信用户资料数据集训练机器学习模型，并用训练好的模型来推断社交网络上的用户人口统计学资料。这种方法有许多局限性：数据集获取困难，人工确认用户资料相当费时费力并且很容易出错；一些人口统计学数据不能够简单地通过分析社交网络上的用户资料来获取（如收入，受教育程度等）；监督式学习的方法通过有限的人工标注数据来训练模型导致其拓展性很差，必须针对每一种数据类型的推断来标注特定的数据，不能够自动根据当前所要处理的数据自动地进行训练并推断；传统的研究普遍针对文本进行分析研究，没有有效利用社交网络本身特性。

### 1.3 本文研究思路以及贡献

本研究就是抱着这样的目的，来探索一种行之有效的数据挖掘以及推断方法，来获得高可信度的人口统计数据。在本文中，我们将仅仅利用Twitter用户所关注的账户，基于回归的方法针对他们的人口统计学数据进行推测。不同于以往的监督是学习分类方法需要大量人工标注数据，本研究中仅以网站访问流量与Twitter用户关注其他用户这样的网络关系为数据源来进行人口统计数据的推测，省去大量资源投入，提供了一种新的思路。

## 2. 研究问题与方法

### 2.1 研究问题

在本文中我们将寻找一种方法，通过网站的访问流量，在个体层面上推测Twitter用户的六个人口统计维度（性别、年龄、种族、收入、受教育程度、有无子女）的具有高可信度的数据。

### 2.2 研究方法

通过采集两类数据对1500+个站点的访问流量所体现的人口统计数据进行研究：

1. 来自QuantCast.com的网站的访问流量
2. Twitter关注者信息

在对数据进行预处理后将二者做回归分析以训练预测模型，最后里用训练好的模型预测Twitter用户的人口统计数据。并用预测结果与真实数据做相关性分析，以检测模型是否适用。

### 2.3 技术选型

在本次研究中我们使用了python程序设计语言编写数据采集以及数据处理的脚本。原因在于python足够简洁，且有许多方便易用的第三方包，因此python为本文研究提供了许多便利之处，节省了大量成本。

采用mongodb作为储存数据的数据库，便于储存由python脚本收集来的json数据，另外，也由于mongodb适合储存大数据，因此，成为本文研究的不二之选。

## 3. 数据采集与预处理

### 3.1 来自QuantCast.com的网站的真实数据 

[Quantcast.com](Quantcast.com)是一个对网站流量进行识别与统计的公司，它通过内嵌在站点中一些代码将一些cookies设置到访客的设备中，追踪用户的浏览行为，并对用户进行建模，以此来识别访问这些网站的的流量来源的身份，最终处理成为多个维度的人口统计学数据。

我们在其中采集了1532个网站六个维度的人口统计数据：

+ 性别：男性、女性
+ 年龄：18-24, 25-34, 35-44, 45-54, 55-64, 65+
+ 收入：\$0-50K, \$50-100K, \$100-150K, \$150K+
+ 受教育程度：未上过大学，大学在读，大学毕业
+ 子女情况：有子女，无子女
+ 人种：高加索人，西班牙人，非洲人，美州人，亚洲人

每个维度代表了某网站访客中该维度不同变量的百分比，例如，在访问[beliefnet.com](beliefnet.com)的访客中男性占比34%，女性占比66%。

在分析Quantcast网站源码与站点架构之后我们编写出适用于它的爬虫，逐一将这1532个网站的人口统计学数据以json格式爬取至文件中。

### 3.2 来自Twitter用户的关注者信息

首先编写脚本收集它的Twitter账号，并人工确认，最终我们得到了1066个网站Twitter账号。

我们在这里假设，这些网站Twitter账号的关注者与访问网站的流量来源的人群是相关的，因此我们就能够将收集自Quantcast的网站流量人口统计学数据视为网站Twitter账户关注者的人口统计学数据。

对于每个网站Twitter账号，利用Twitter官方提供的RESTful API中的followers/ids API收集300个关注者，并针对每一个关注者利用Twitter提供的friends/ids API收集5000个关注的用户(friend)。

因此到目前为止，对于每一个网站，我们理论上能够收集到(300*5000=1500000)个Twitter账户，均为其关注者关注的账户，这里我们它们称之为源网站账户的邻居(neighbor)。

分析这些邻居易发现其中有很多重复账户，这种现象的出现很符合常理，例如：谷歌的的关注者都有很大概率可能在关注bbc。而这些重复的账户，正是本文研究中研究数据的来源，同时引出本文的一个核心假设：

​	**一个网站的重复邻居数量代表了网站与该邻居相似程度。**

因此，对于每一个采集自Quantcast的源网站Twitter账户，我们都可以用相似邻居个数构造一个邻居向量。例如：账户A拥有两个关注者B和C，与此同时B除A外还关注了D和E，而C则关注了D与F，此时构造A的邻居向量：{(D, 2), (E, 1), (F, 1)}，邻居向量则量化了邻居之间的联系，在本例中，A的邻居向量表明A与D的相似程度比A与E或A与F之间的相似程度高。

## 4. 模型构造与数据分析

## 5. 结论

